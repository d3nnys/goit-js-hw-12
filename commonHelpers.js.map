{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/octagon.svg","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function buildUrl(query, page) {\n  const API_KEY = '42458886-d6d62fa6987d6f72b0a5e97bb';\n  const URL = 'https://pixabay.com/api/';\n\n  const fetchGallery = await axios.get(URL, {\n    params: {\n      per_page: 15,\n      page: page,\n      key: API_KEY,\n      q: query,\n      IMAGE_TYPE: 'photo',\n      SAFESEARCH: 'true',\n      ORIENTATION: 'horizontal',\n    },\n  });\n\n  return fetchGallery.data;\n}\n","export function renderGallery(images) {\n  return images\n    .map(\n      img =>\n        `\n        <li class=\"gallery-item\">\n          <div class=\"gallery-box item-card-wrapper\">\n            <a class=\"gallery-link\" href=\"${img.largeImageURL}\">\n              <img class=\"gallery-img\" src=\"${img.webformatURL}\" alt=\"${img.tags}\" loading=\"lazy\">\n            </a>\n            <div class=\"card-box\">\n              <div>\n                <p class=\"card-box-text\"><b>Likes</b></p>\n                <p class=\"card-box-text\">${img.likes}</p>\n              </div>\n              <div>\n                <p class=\"card-box-text\"><b>Views</b></p>\n                <p class=\"card-box-text\">${img.views}</p>\n              </div>\n              <div>\n                <p class=\"card-box-text\"><b>Comments</b></p>\n                <p class=\"card-box-text\">${img.comments}</p>\n              </div>\n              <div>\n                <p class=\"card-box-text\"><b>Downloads</b></p>\n                <p class=\"card-box-text\">${img.downloads}</p>\n              </div>\n            </div>\n          </div>\n        </li>`\n    )\n    .join('');\n}\n","export default \"__VITE_ASSET__de411352__\"","'use strict';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { buildUrl } from './js/pixabay-api.js';\nimport { renderGallery } from './js/render-functions.js';\nimport Error from './img/octagon.svg';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst refs = {\n  form: document.querySelector('.form'),\n  gallery: document.querySelector('.list'),\n  loader: document.querySelector('.loader'),\n  loadMoreBtn: document.querySelector('.btn-more'),\n};\n\nlet currentPage = 1;\nlet searchQuery = null;\n\nhideLoader();\nhideBtn();\n\nasync function checkForSending(event) {\n  event.preventDefault();\n\n  searchQuery = refs.form.elements.query.value.trim();\n\n  if (searchQuery === '') {\n    iziToast.warning({\n      message: 'Please enter a search query.',\n      messageColor: 'black',\n      backgroundColor: '#ffac26',\n      position: 'topRight',\n      pauseOnHover: false,\n      progressBarColor: 'black',\n      timeout: 3000,\n    });\n\n    return;\n  }\n\n  showLoader();\n\n  await buildUrl(searchQuery, currentPage)\n    .then(data => {\n      if (data && data.hits && data.hits.length > 0) {\n        return data;\n      } else if (data.hits.length < 15) {\n        hideBtn();\n      }\n    })\n    .then(data => {\n      const images = data.hits;\n\n      refs.gallery.innerHTML = renderGallery(images);\n\n      if (images.length < 15) {\n        hideBtn();\n      } else {\n        showBtn();\n      }\n\n      lightbox.refresh();\n    })\n    .catch(error =>\n      iziToast.error({\n        theme: 'dark',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: '#ffffff',\n        backgroundColor: '#ef4040',\n        position: 'topRight',\n        iconUrl: Error,\n        pauseOnHover: false,\n        progressBarColor: '#b51b1b',\n        timeout: 3000,\n      })\n    )\n    .finally(() => {\n      hideLoader();\n\n      refs.form.reset();\n    });\n}\n\nrefs.form.addEventListener('submit', checkForSending);\nrefs.loadMoreBtn.addEventListener('click', async () => {\n  await buildUrl(searchQuery, currentPage)\n    .then(res => {\n      currentPage++;\n\n      showLoader();\n      refs.gallery.insertAdjacentHTML('beforeend', renderGallery(res.hits));\n\n      lightbox.refresh();\n\n      if (res.hits.length < 15) {\n        hideBtn();\n\n        iziToast.info({\n          theme: 'dark',\n          message: \"We're sorry, but you've reached the end of search results.\",\n          messageColor: '#ffffff',\n          backgroundColor: '#1f79ff',\n          position: 'topRight',\n          pauseOnHover: false,\n          progressBarColor: 'black',\n          timeout: 3000,\n        });\n      }\n\n      const itemHeight = document\n        .querySelector('.gallery-item')\n        .getBoundingClientRect().height;\n\n      window.scrollTo({\n        top: itemHeight * 2 + window.pageYOffset,\n        behavior: 'smooth',\n      });\n    })\n    .catch(error =>\n      iziToast.error({\n        theme: 'dark',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: '#ffffff',\n        backgroundColor: '#ef4040',\n        position: 'topRight',\n        iconUrl: Error,\n        pauseOnHover: false,\n        progressBarColor: '#b51b1b',\n        timeout: 3000,\n      })\n    )\n    .finally(() => {\n      hideLoader();\n    });\n});\n\nfunction showBtn() {\n  refs.loadMoreBtn.classList.remove('is-hidden');\n}\n\nfunction hideBtn() {\n  refs.loadMoreBtn.classList.add('is-hidden');\n}\n\nfunction showLoader() {\n  refs.loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n  refs.loader.style.display = 'none';\n}\n"],"names":["buildUrl","query","page","API_KEY","URL","axios","renderGallery","images","img","Error","lightbox","SimpleLightbox","refs","currentPage","searchQuery","hideLoader","hideBtn","checkForSending","event","iziToast","showLoader","data","showBtn","error","res","itemHeight"],"mappings":"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"}